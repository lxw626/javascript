<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript">
      // 数组的创建
      {
        // 通过构造函数创建数组
        let arr1 = new Array();
        // 通过字面量创建数组
        let arr2 = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
      }


      /**
       * 数组的常用方法
       */

      // 向数组末尾添加一个或者多个元素
      {
        let arr = ["唐僧", "孙悟空"];
        arr.push("猪八戒", "沙和尚");
        console.log("向数组末尾添加一个或者多个元素", arr);
      }
      // 删除数组末尾的一个元素,并返回
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚", "白骨精"];
        let xxx = arr.pop();
        console.log("删除数组末尾的一个元素,并返回", arr, xxx);
      }

      // 向数组开头添加一个或多个元素
      {
        let arr = ["唐僧"];
        arr.unshift("孙悟空", "猪八戒", "沙和尚");
        console.log("向数组开头添加一个或多个元素", arr);
      }

      // 删除并返回数据的第一个元素
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
        let xxx = arr.shift()
        console.log("删除并返回数据的第一个元素", arr, xxx);
      }
      // 查找并返回第一个匹配的元素
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
        let xxx = arr.find(e => e == "孙悟空")
        console.log("查找并返回第一个匹配的元素", xxx);
      }
      // 数组的过滤:返回满足条件的所有元素
      {
        let arr = [
          {
            name: "唐僧",
            sex: "男"
          },
          {
            name: "白骨精",
            sex: "女"
          },
          {
            name: "玉兔精",
            sex: "女"
          }
        ];
        let xxx = arr.filter(e => e.sex == "女")
        console.log("返回满足条件的所有元素", xxx);
      }
      // 数组的加工(映射)
      {
        let arr = [
          {
            name: "唐僧",
            age: 22,
          },
          {
            name: "白骨精",
            age: 18
          },
          {
            name: "玉兔精",
            age: 19
          }
        ];
        let xxx = arr.map(e => e.name)
        // 返回对象必须要加(),不加()是代码块
        let hhh = arr.map(e => ({
          name: e.name,
        }))
        console.log("数组的map方法===========>", xxx, hhh);
      }

      /**
       * 数组的遍历
       * 第一种:for循环
       * 第二种方法:ie8之后支持,需要考虑兼容性.
       * 需要传入一个函数,第一个参数,数组中的元素,第二个索引,第三个当前数组
       */
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
        arr.forEach(function (value, index, obj) {
          console.log("数组的遍历", "value:" + value, "index:" + index, "obj:" + obj);
        });
        arr.forEach((value, index, obj) => {
          console.log("数组的遍历", "value:" + value, "index:" + index, "obj:" + obj);
        });
      }

      /**
       * 截取子数组,不影响原数组,返回子数组
       * slice(start[,end]),含头不含尾,
       * 如果end为负数,表示开头到从结尾开始去掉-end个元素
       */
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
        arr2 = arr.slice(1, 3);
        console.log("截取子数组==>", "原数组", arr) //"唐僧,孙悟空,猪八戒,沙和尚"
        console.log("截取子数组==>", "子数组", arr2) //"孙悟空,猪八戒"

      }

      /**
       * splice(start,num,element1,element2,...elementn),从start开始删除(包含),删除num个元素
       * 返回删除元素组成的子数组
       * 影响原数组
       */
      {
        let arr = ["唐僧", "孙悟空", "猪八戒", "沙和尚"];
        let arr2 = arr.splice(1, 3, "玉兔精", "蜘蛛精")
        console.log("splice", "原数组", arr) //唐僧,玉兔精,蜘蛛精
        console.log("splice", "删除的子数组", arr2) //孙悟空,猪八戒,沙和尚"
      }
      // 将伪数组转化为数组
      {
        let names = function () {
          let arr = Array.prototype.slice.call(arguments)
          // arr类型是object,instanceof Array却为true
          console.log("arguments的类型:" + typeof arguments, "arr的类型:" + typeof arr, "arr是否是数组类型:" + (arr instanceof Array));
          console.log(arguments, arr);
        }
        names("张三", "李四", "王五")

      }
      // 填充数组
      {
        let fill = Array(5).fill("hello");
        console.log(fill);
      }
      // 数组转object
      {
        let persons = [{id: 1, name: 'zs', age: 18}, {id: 2, name: 'ls', age: 28}, {id: 3, name: 'ww', age: 38}];
        // 方法1
        {
          let personMap = {}
          persons.map(person => personMap[person.id] = person)
          console.log("方法1", personMap)
        }
        // 方法2
        {
          let personMap = {}
          persons.forEach(person => personMap[person.id] = person)
          console.log("方法2", personMap)
        }
        // 方法3
        {
          let personMap = {}
          for (let index in persons) {
            personMap[persons[index].id] = persons[index]
          }
          console.log("方法3", personMap)

        }
        // 数组的reduce函数
        {
          // 数组求和
          {
            let arr = [3, 9, 4, 3, 6, 0, 9];
            // 最简单的求和
            let sum = arr.reduce((prev, cur) => prev + cur);
            // 在默认值的基础上累加
            // let sum = arr.reduce((prev, cur)=> prev + cur,0);
            console.log(sum)
          }
          {
            let arr = [
              {
                name: "唐僧",
                age: 22,
              },
              {
                name: "白骨精",
                age: 18
              },
              {
                name: "玉兔精",
                age: 19
              }
            ];

            /**
             * 对象某个属性求和必须给定默认值,否则出现类似 [object Object]1819 的结果
             * cur表示数组的当前元素,
             * prev:如果给了默认值,第一次进来prev就是默认值,如果没有默认值第一次进来prev就是数组的第一个元素
             * 当index>0时prev表示处理函数的返回值
             */
                // let sum = arr.reduce((prev,cur)=>prev+cur.age) // [object Object]1819
            let sum = arr.reduce((prev, p) => prev + p.age) // 59
            console.log(sum)
          }
        }
        {
          /**
           * some() 方法用于检测数组中的元素是否满足指定条件（函数提供）。
           * some() 方法会依次执行数组的每个元素：
           * 如果有一个元素满足条件，则表达式返回true , 剩余的元素不会再执行检测。
           * 如果没有满足条件的元素，则返回false。
           * 注意： some() 不会对空数组进行检测。
           * 注意： some() 不会改变原始数组。
           * @type {number[]}
           */
          let ages = [12, 15, 18, 22, 30]
          let have = ages.some(item => item > 18);
          console.log(have)
        }
      }


    </script>
</head>

<body>


</body>

</html>
